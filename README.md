# Домашнее задание № 17. Репликация.

Схема БД лежит в корне проекта.
## Прогноз по возможному росту базы

Таблицы, которые будут расти интенсивнее всего:
+ address
+ customer
+ сart
+ order
+ order_history
+ order_option
+ order_product
+ order_total

В реализованных проектах, база данных небольшого магазина, при средней посещаемости 2000-3000 человек в день, делает прирост в 215 МБ в месяц.  
Итого мы имеем прогнозируемый прирост в 2,5 - 3 ГБ в год.  
Сравнительно, данный прирост не является серьезным вызовом.  
  
Если рассматривать масштабирование проекта на федеральный уровень, мы сразу же сталкиваемся с проблемами резкого увеличения вышеперечисленных таблиц.  
Также, если мы предполагаем увеличение товарной номенклатуры, то следует обратить внимание на рост размера следующих таблиц:  
+ product
+ product_attribute
+ product_discount
+ product_image
+ product_option
+ product_option_value
+ product_special
+ product_to_category

Таблицы, относящиеся к категориям, опциям и атрибутам - в целом, не будут расти с той же интенсивностью, так как возможный набор данных параметров более ограничен.  
  
## Рост количества пользователей, и всплески одновременных соединений.

При внедрении различных маркетинговых активностей всегда наблюдается рост посещаемости и активности пользователей на сайте.  
  
К сожалению, я не имел опыта работы с высоконагруженными проектами, поэтому методы борьбы с низкой производительностью, пока что остаются для меня в рамках теории.

## Возможные угрозы и методы борьбы с ними.

Одна из основных угроз, с которыми приходилось сталкиваться - sql инъекции. Были побеждены, в первую очередь, на бэкенде, путем анализа всех возможных запросов, использования подготовки запросов, а также минимизации общения пользователя непосредственно с БД посредством ввода текста в интерфейсе.

## Рекомендации к резервному копированию

1. Раз в месяц
+ order_status
+ language
+ zone

2. Раз в неделю
+ attribute
+ attribute_description
+ attribute_group
+ attribute_group_description
+ customer_category
+ option
+ option_description
+ option_value
+ option_value_description 
+ geo_zone
+ zone_to_geo_zone

3. Раз в сутки
+ category
+ category_description
+ manufacturer
+ manufacturer_description
+ product
+ product_attribute
+ product_description
+ product_discount
+ product_image
+ product_option
+ product_option_value
+ product_special
+ product_to_category
  
4. Четыре раза в сутки
+ address
+ customer
+ сart
+ order
+ order_history
+ order_option
+ order_product
+ order_total

## Рекомендации по репликации.

### Схема репликации
!['Схема репликации'](img/001.png)

От мастера мы делаем три реплики:
+ Реплика для работы с клиентскими приложениями. При внедрении мобильного приложения, будет целесообразно выделить под него еще одну реплику.
+ Реплика для работы с отчетами. Так как это OLAP нагрузка, необхордимо отделить ее от основных нагруженных нод, чтобы она не мешала работе. Отчеты могут быть доступны как клиентам, так и администраторам.
+ Реплика для работы с бэкапами.


